<?xml version="1.0" encoding="UTF-8"?>
<odoo>

    <record id="view_partner_form_sms" model="ir.ui.view">
        <field name="name">res.partner.sms.buttons</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.view_partner_form"/>
        <field name="arch" type="xml">
            <xpath expr="//div[hasclass('mb8')][1]/div[1]/div[1]/div[2]" position="after">
                <div class="d-flex align-items-baseline w-md-50">
                    <i class="fa fa-fw me-1 fa-comment text-primary" 
                        invisible="verified_phone_sms or not generated_otp_sms"
                        groups="acs_sms.group_sms_otp"
                        title="SMS OTP"/>

                    <div name="acs_otp_sms" groups="acs_sms.group_sms_otp">
                        <field name="acs_otp_sms" invisible="verified_phone_sms or not generated_otp_sms"/>
                        <button name="action_send_otp_sms" string="Send OTP" type="object"
                                class="btn btn-link pt-0 pb-0 ps-0" 
                                invisible="verified_phone_sms">
                            <span class="o_button_icon fa fa-fw fa-send"/><span> Send OTP</span>
                        </button>

                        <button name="action_verify_otp_sms" string="Verify OTP" type="object"
                                class="btn btn-link pt-0 pb-0 ps-0" 
                                invisible="verified_phone_sms">
                            <span class="fa fa-check-circle me-1"/><span> Verify OTP</span>
                        </button>
                    </div>

                    <div class="col text-end" invisible="not verified_phone_sms">
                        <div colspan="2" class="badge text-bg-success mb-2">OTP Successfully Verified</div>
                    </div>

                    <field name="verified_phone_sms" invisible="1"/>
                    <field name="generated_otp_sms" invisible="1"/>
                </div>
            </xpath>
        </field>
    </record>

</odoo>