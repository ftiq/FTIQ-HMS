<?xml version="1.0" encoding="utf-8"?>
<odoo>

	<record id="hms_test_view" model="ir.ui.view">
        <field name="name">acs.lab.test.form</field>
        <field name="model">acs.lab.test</field>
        <field name="inherit_id" ref="acs_laboratory.hms_test_view"/>
        <field name="arch" type="xml">
        	<xpath expr="//group" position="before">
                <field name="image_1920" widget="image" class="oe_avatar" options="{'preview_image': 'image_1920'}"/>
            </xpath>
            <field name="result_value_type" position="after">
                <field name="allowed_online_booking"/>
            </field>
        </field>
    </record>

	<!-- schedule -->
    <record id="appointment_schedule_form" model="ir.ui.view">
        <field name="name">acs.schedule.form</field>
        <field name="model">acs.schedule</field>
        <field name="inherit_id" ref="acs_website_booking.acs_schedule_form"/>
        <field name="arch" type="xml">
            <field name="company_id" position="after">
                <field name="collection_center_id" invisible="schedule_type!='laboratory'" required="schedule_type=='laboratory'"/>
            </field>
        </field>
    </record>
 
    <record id="patient_laboratory_test_request_form" model="ir.ui.view">
        <field name="name">acs.laboratory.request.form</field>
        <field name="model">acs.laboratory.request</field>
        <field name="inherit_id" ref="acs_laboratory.patient_laboratory_test_request_form"/>
        <field name="arch" type="xml">
            <field name="date" position="attributes">
                <attribute name="force_save">True</attribute>
            </field>
            <field name="collection_center_id" position="after">
                <field name='collection_center_id' invisible="1"/>
                <label for="schedule_date" string="Schedule Date"/>
                <div class="o_row">
                    <field name="schedule_date"  nolabel="1" class="oe_inline" readonly="state!='draft'"/>
                    <field name='schedule_slot_id' nolabel="1" class="oe_inline" domain=" [('acs_slot_id.slot_date','=',schedule_date),('acs_slot_id.acs_schedule_id.collection_center_id','=',collection_center_id)]" options="{'no_create': True}" readonly="state!='draft'"/>
                </div>
            </field>
            <field name="invoice_id" position="after">
                <field name='booked_online' readonly="state!='draft'"/>
                <field name='patient_count' readonly="state!='draft'"/>
            </field>
        </field>
    </record>

    <record id="view_acs_laboratory_request_search" model="ir.ui.view">
        <field name="name">acs.laboratory.request.search</field>
        <field name="model">acs.laboratory.request</field>
        <field name="inherit_id" ref="acs_laboratory.view_acs_laboratory_request_search"/>
        <field name="arch" type="xml">
            <filter name="tomorrow" position="after">
                <separator/>
                <filter name="booked_online" string="Online Requests" domain="[('booked_online', '=',True)]"/>
            </filter>
        </field>
    </record>

    <record id="action_online_requests" model="ir.actions.act_window">
        <field name="name">Online Lab Requests</field>
        <field name="path">almightyhms-lab-online-requests</field>
        <field name="res_model">acs.laboratory.request</field>
        <field name="view_mode">list,form,calendar,pivot</field>
        <field name="context">{'search_default_booked_online': 1,'search_default_today': 1}</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                No online Appointments.
            </p>
        </field>
    </record>

    <record id="action_laboratory_schedule_slot_lines" model="ir.actions.act_window">
        <field name="name">Laboratory Slots</field>
        <!-- <field name="path">almightyhms-lab-schedule-slot-line</field> -->
        <field name="res_model">acs.schedule.slot.lines</field>
        <field name="view_mode">calendar,form</field>
        <field name="domain">[('schedule_type', '=', 'laboratory')]</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                No Records Found.
            </p>
        </field>
    </record>

</odoo>