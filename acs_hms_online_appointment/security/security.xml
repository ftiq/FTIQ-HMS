<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record id="privilege_acs_appointment_website_booking" model="res.groups.privilege" >
        <field name="name">Patient Appointment Manager</field>
        <field name="sequence">10</field>
        <field name="category_id" ref="acs_website_booking.website_booking_category"/>
    </record>
 
    <record id="group_hms_patient_appointment_manager" model="res.groups">
        <field name="name">Allow</field>
        <field name="privilege_id" ref="privilege_acs_appointment_website_booking"/>
        <field name="implied_ids" eval="[Command.link(ref('acs_hms.group_hms_receptionist')),Command.link(ref('acs_website_booking.group_booking_user'))]"/>
    </record>

    <record id="acs_hms_base.group_hms_manager" model="res.groups">
        <field name="implied_ids" eval="[Command.link(ref('acs_website_booking.group_booking_manager'))]"/>
    </record>

    <data noupdate="0">


        <!-- See Own Appointment Schedule & Slot & Lines -->
        <record id="hms_own_appointment_schedule_rule" model="ir.rule">
            <field name="name">Dr: Own Appointment Schedule</field>
            <field name="model_id" ref="acs_website_booking.model_acs_schedule"/>
            <field name="domain_force">[('physician_ids.user_id','=',user.id)]</field>
            <field name="groups" eval="[Command.link(ref('acs_hms_base.group_hms_user'))]"/>
        </record>

        <record id="hms_dr_own_acs_schedule_slot_rule" model="ir.rule">
            <field name="name">Dr: Schedule Slot User</field>
            <field name="model_id" ref="acs_website_booking.model_acs_schedule_slot"/>
            <field name="domain_force">[('acs_schedule_id.physician_ids.user_id','in',[user.id])]</field>
            <field name="groups" eval="[Command.link(ref('acs_website_booking.group_booking_user'))]"/>
        </record>

        <record id="acs_dr_schedule_slot_lines_rule" model="ir.rule">
            <field name="name">Schedule Slot Lines User</field>
            <field name="model_id" ref="acs_website_booking.model_acs_schedule_slot_lines"/>
            <field name="domain_force">[('physician_id.user_id','=',user.id)]</field>
            <field name="groups" eval="[Command.link(ref('acs_website_booking.group_booking_user'))]"/>
        </record>

        <!-- For Manager -->        
        <record id="hms_manager_appointment_schedule_manager_rule" model="ir.rule">
            <field name="name">Manager Appointment Schedule</field>
            <field name="model_id" ref="acs_website_booking.model_acs_schedule"/>
            <field name="domain_force">[('schedule_type','=','appointment')]</field>
            <field name="groups" eval="[Command.link(ref('acs_hms_online_appointment.group_hms_patient_appointment_manager'))]"/>
        </record>

        <record id="hms_manager_appointment_schedule_slot_manager_rule" model="ir.rule">
            <field name="name">Manager Appointment Schedule Slot</field>
            <field name="model_id" ref="acs_website_booking.model_acs_schedule_slot"/>
            <field name="domain_force">[('acs_schedule_id.schedule_type','=','appointment')]</field>
            <field name="groups" eval="[Command.link(ref('acs_hms_online_appointment.group_hms_patient_appointment_manager'))]"/>
        </record>

        <record id="acs_manager_schedule_slot_lines_rule" model="ir.rule">
            <field name="name">Manager Schedule Slot Lines</field>
            <field name="model_id" ref="acs_website_booking.model_acs_schedule_slot_lines"/>
            <field name="domain_force">[('schedule_type','=','appointment')]</field>
            <field name="groups" eval="[(4, ref('acs_hms_online_appointment.group_hms_patient_appointment_manager'))]"/>
        </record>

    </data>
</odoo>
