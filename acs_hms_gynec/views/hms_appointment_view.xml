<?xml version="1.0" encoding="UTF-8"?>
<odoo>

    <!-- Appointment View-->
    <record model="ir.ui.view" id="view_hms_appointment_form_inherit_gynec_1">
        <field name="name">hms.appointment.view.inherit</field>
        <field name="model">hms.appointment</field>
        <field name="inherit_id" ref="acs_hms.view_hms_appointment_form"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='bmi']" position="after">
                <label for="hb"/>
                <div class="o_row" name="div_hb">
                    <field name="hb"/>
                    <field name="acs_hb_name"/>
                </div>
                <label for="screatinine"/>
                <div class="o_row" name="div_screatinine">
                    <field name="screatinine"/>
                    <field name="acs_screatinine_name"/>
                </div>
            </xpath>
            <xpath expr="//field[@name='bmi_state']" position="after">
                <label for="urine"/>
                <div class="o_row" name="div_urine">
                    <field name="urine"/>
                    <field name="acs_urine_name"/>
                </div>
            </xpath>
            <xpath expr="//page[@name='clinical_ass']" position="after">
                <page string="Gynec" name="gynec" groups="acs_hms_gynec.group_hms_user_gynec" invisible="department_type!='gynec'">
                    <group>
                        <field name="lmp" invisible="department_type!='gynec'"/>
                    </group>
                    <notebook>
                        <page string="Gyneco" name="gynec_gyneco">
                            <group string="General" >
                                <field name="currently_pregnant"/>
                                <field name="menopause"/>
                                <field name="urinary_problem"/>
                                <field name="menarche"/>
                                <field name="contraception_method"/>
                                <field name="contraception_product"/>
                                <field name="dispareunia"/>
                            </group>
                            <group string="Mestrual History">
                                <field name="menstrual_history_ids" nolabel="1" colspan="2"/>
                            </group>
                        </page>
                        <page string="Obstetrics" name="gynec_obstetrics">
                            <group>
                                <group name="gravida_details">
                                    <field name="gravida"/>
                                    <field name="premature"/>
                                    <field name="vaginal_birth"/>
                                    <field name="cesarean_birth"/>
                                </group>
                                <group>
                                    <field name="abortions"/>
                                    <field name="stillbirths"/>
                                    <field name="ectopic"/>
                                </group>
                            </group>
                            <group string="Pregnancy History" name="pregnancy_history">
                                <field name="pregnancy_history_ids" nolabel="1"  context="{'default_patient_id': patient_id}" colspan="2">
                                    <list string="Pregnancy History">
                                        <field name="gravida"/>
                                        <field name="physician_id"/>
                                        <field name="lmp"/>
                                        <field name="pdd"/>
                                        <field name="fetus"/>
                                        <field name="warning"/>
                                    </list>
                                </field>
                            </group>
                        </page>
                        <page string="Sonography" name="gynec_sonography">
                            <separator string="Sonography Pelvis Reports" colspan="4"/>
                            <field name="sonography_pelvis_ids" nolabel="1" context="{'default_lmp':lmp, 'default_patient_id':patient_id}" readonly="state in ['cancel','done']">
                                <list string="Sonography Pelvis Report">
                                    <field name="name"/>
                                    <field name="date"/>
                                    <field name="uterus"/>
                                    <field name="endometrial_thickness"/>
                                    <field name="left_ovary_size"/>
                                    <field name="right_ovary_size"/>
                                    <field name="conclusion"/>
                                    <button name="print_sono_elvis_report" string="Print Report" type="object" class="oe_highlight"/>
                                </list>
                            </field>
                            <separator string="Follicular Study Reports" colspan="4"/>
                            <field name="sonography_follical_ids" nolabel="1" context="{'default_lmp':lmp, 'default_patient_id':patient_id}" readonly="state in ['cancel','done']">
                                <list string="Follical Study Reports">
                                    <field name="name"/>
                                    <field name="date"/>
                                    <field name="conclusion"/>
                                    <field name="advice"/>
                                    <button name="print_sono_follical_report" string="Print Report" type="object" class="oe_highlight"/>
                                </list>
                            </field>
                            <separator string="Sonography Obstetric Reports" colspan="4"/>
                            <field name="sonography_obstetric_ids" nolabel="1" context="{'default_lmp':lmp, 'default_patient_id':patient_id}" readonly="state in ['cancel','done']">
                                <list string="Sonography Obstetric Reports">
                                    <field name="name"/>
                                    <field name="date"/>
                                    <field name="fetues"/>
                                    <field name="presentation"/>
                                    <field name="placenta"/>
                                    <field name="impression"/>
                                    <button name="print_sono_obstetric_report" string="Print Report" type="object" class="oe_highlight"/>
                                </list>
                            </field>
                        </page>
                        <page string="Systemic Examination" name="gynec_systemic_examination">
                            <separator string="Per Abdominal, P/R Examination and P/V Examination" colspan="4"/>
                            <field name="examination_ids" nolabel="1" context="{'default_patient_id': patient_id}" readonly="state in ['cancel','done']">
                                <list string="Examinations">
                                    <field name="date"/>
                                    <field name="appointment_id"/>
                                    <field name="bp"/>
                                    <field name="weight"/>
                                    <field name="remarks"/>
                                </list>
                            </field>
                            <separator string="Mamography Tests" colspan="2"/>
                            <group>
                                <p colspan="2">
                                    A mammography, or mammogram, is an X-ray of the breast. Itâ€™s a screening tool used to detect and diagnose breast cancer.
                                </p>
                            </group>
                            <field name="mammography_history_ids" nolabel="1" context="{'default_patient_id': patient_id, 'default_appointment_id': id}">
                                <list string="Mamography Tests" editable="bottom">
                                    <field name="patient_id" column_invisible="1"/>
                                    <field name="date"/>
                                    <field name="result"/>
                                    <field name="comments"/>
                                </list>
                            </field>
                            <separator string="Pap Details" colspan="2"/>
                            <group>
                                <p colspan="2">
                                    A Pap test is a test your doctor or nurse does to check your cervix for any cells that are not normal. The cervix is the lower part of the uterus (womb), which opens into the vagina. Abnormal cervical cells, if not found and treated, can lead to cervical cancer.
                                </p>
                            </group>
                            <field name="pap_history_ids" nolabel="1" context="{'default_patient_id': patient_id, 'default_appointment_id': id}">
                                <list string="Pap Tests" editable="bottom">
                                    <field name="patient_id" column_invisible="1"/>
                                    <field name="date"/>
                                    <field name="result"/>
                                    <field name="comments"/>
                                </list>
                            </field>
                            <separator string="Colposcopy Details" colspan="2"/>
                            <group>
                                <p colspan="2">
                                    Procedure to closely examine your cervix, vagina and vulva for signs of disease.
                                </p>
                            </group>
                            <field name="colposcopy_history_ids" nolabel="1" context="{'default_patient_id': patient_id, 'default_appointment_id': id}">
                                <list string="Colposcopy Tests" editable="bottom">
                                    <field name="patient_id" column_invisible="1"/>
                                    <field name="date"/>
                                    <field name="result"/>
                                    <field name="comments"/>
                                </list>
                            </field>
                            <div name="genitals_and_fetus_data">
                                <separator string="External Genitals"/>
                                <field name="external_genitals" placeholder="External Genitals..." readonly="state in ['cancel','done']"/>
                                <separator string="R/S"/>
                                <field name="rs" placeholder="R/S..." readonly="state in ['cancel','done']"/>
                                <separator string="C.V.S"/>
                                <field name="cvs" placeholder="C.V.S..." readonly="state in ['cancel','done']"/>
                                <separator string="C.N.S"/>
                                <field name="cns" placeholder="C.N.S..." readonly="state in ['cancel','done']"/>
                                <separator string="Back Spine"/>
                                <field name="back_spine" placeholder="Back Spine..." readonly="state in ['cancel','done']"/>
                                <separator string="Peripheral Pulsation"/>
                                <field name="peripheral_pulsation" placeholder="Peripheral Pulsation..." readonly="state in ['cancel','done']"/>
                            </div>
                        </page>
                    </notebook>
                </page>
                
            </xpath>
            <xpath expr="//field[@name='physician_id']" position="after">
                <field name="gender" invisible="1"/>
            </xpath>
        </field>
    </record>

    <record id="action_appointment" model="ir.actions.act_window">
        <field name="name">Appointment</field>
        <field name="path">almightyhms-gynec-appointment</field>
        <field name="res_model">hms.appointment</field>
        <field name="view_mode">list,form,kanban,calendar,pivot</field>
        <field name="domain" eval="[('department_id.department_type','=','gynec')]"/>
        <field name="context">{'search_default_today': 1,'search_default_done': 1,'acs_department_type': 'gynec'}</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                No Record Found
            </p>
            <p>
                Click to add an Gynec Appointment.
            </p>
        </field>
    </record>

</odoo>